# Volatility Breakout 전략 사용자 매뉴얼
> BTC 선물 자동매매 전략 — 초보자도 이해할 수 있는 가이드

---

## 1. 이 전략은 뭔가요?

### 한 줄 요약
> "어제 비트코인이 움직인 폭을 기준으로, 오늘 일정 수준 이상 가격이 튀면 따라 들어간다."

### 비유로 이해하기

스프링을 생각해보세요.

- 어제 스프링이 **10cm** 압축됐다가 풀렸습니다 (= 어제 가격 변동폭)
- 오늘 스프링이 **5cm 이상** 한쪽으로 튕기면 (= 변동폭의 50%) 그 방향으로 힘이 실렸다고 판단합니다
- 이때 스프링이 튕기는 방향으로 **같이 올라탑니다**

이것이 Volatility Breakout(변동성 돌파)의 핵심입니다.

### 왜 돈이 되나요?

시장에는 **관성(모멘텀)**이 있습니다.

```
가격이 일정 수준을 뚫고 올라가면 → 더 올라가는 경향
가격이 일정 수준을 뚫고 내려가면 → 더 내려가는 경향
```

이 전략은 그 **"뚫는 순간"을 포착해서 올라타고, 모멘텀이 소멸되기 전에 내리는 것**입니다.
모든 돌파가 성공하진 않지만, 성공했을 때의 이익이 실패했을 때의 손실보다 크게 설계되어 있습니다.

---

## 2. 용어 사전

전략을 이해하기 전에 꼭 알아야 할 용어들입니다.

### 거래 기본 용어

| 용어 | 설명 |
|---|---|
| **Long (롱)** | "가격이 오를 것"에 베팅. 싸게 사서 비싸게 파는 것. |
| **Short (숏)** | "가격이 내릴 것"에 베팅. 비싸게 빌려 팔고 싸게 사서 갚는 것. 선물이라 가능. |
| **레버리지 (Leverage)** | 빌린 돈으로 투자 규모를 키우는 것. 3×이면 $1,000으로 $3,000어치 거래 가능. 수익도 3배, **손실도 3배**. |
| **마진 (Margin)** | 레버리지 거래를 위해 맡기는 담보금. $3,000 포지션에 3× 레버리지면 마진은 $1,000. |
| **Isolated Margin** | 해당 거래에 배정한 마진만 위험에 노출. 최악의 경우 그 마진만 잃음 (전 재산이 아님). |
| **NAV** | Net Asset Value. 현재 내 계좌 총 자산 가치. |
| **Perpetual Swap (무기한 선물)** | 만기 없이 계속 유지할 수 있는 선물 계약. 대신 펀딩 수수료가 있음. |

### 차트/지표 용어

| 용어 | 설명 |
|---|---|
| **OHLCV** | Open(시가), High(고가), Low(저가), Close(종가), Volume(거래량). 봉 하나의 정보. |
| **1H 봉 / 15m 봉** | 1시간 / 15분 단위로 묶은 가격 데이터. |
| **ATR (Average True Range)** | 최근 14개 봉 동안 가격이 평균적으로 얼마나 움직였는지. **변동성의 척도**. ATR이 크면 시장이 많이 출렁이는 것. |
| **EMA (Exponential Moving Average)** | 최근 가격에 더 많은 가중치를 준 이동평균선. EMA(50)은 최근 50개 봉의 가중 평균. |
| **Range (레인지)** | 하루 중 최고가 - 최저가. 그날 가격이 움직인 전체 폭. |

### 주문/리스크 용어

| 용어 | 설명 |
|---|---|
| **Stop Loss (SL, 손절)** | "여기까지 떨어지면 손해 보고 나가자"라는 자동 청산 가격. |
| **Take Profit (TP, 익절)** | "여기까지 오르면 이익 확정하고 나가자"라는 자동 청산 가격. |
| **시장가 주문** | 지금 당장 거래 가능한 가격에 즉시 체결. 빠르지만 미세한 가격 차이(슬리피지) 발생. |
| **슬리피지 (Slippage)** | 주문 넣은 가격과 실제 체결 가격의 차이. 보통 아주 작지만 비용으로 반영. |
| **펀딩 레이트 (Funding Rate)** | 무기한 선물의 가격을 현물과 맞추기 위해 8시간마다 롱↔숏 사이에 오가는 수수료. 양수면 롱이 숏에게, 음수면 숏이 롱에게 지불. |
| **Drawdown (DD)** | 최고점 대비 현재까지의 하락률. 10% DD면 최고 $10,000에서 $9,000으로 떨어진 것. |
| **Liquidation (강제 청산)** | 마진이 부족해지면 거래소가 강제로 포지션을 닫아버리는 것. **절대 피해야 함.** |

---

## 3. 전략 작동 원리 (Step by Step)

### 매일 새벽 (UTC 00:00 = 한국시간 09:00)

**돌파 레벨 계산**

```
어제 BTC 최고가: $82,000
어제 BTC 최저가: $78,000
어제 Range = $82,000 - $78,000 = $4,000

오늘 시가 (09:00 가격): $80,000
k값 = 0.5

롱 트리거 = $80,000 + 0.5 × $4,000 = $82,000  ← 이 위로 가면 매수
숏 트리거 = $80,000 - 0.5 × $4,000 = $78,000  ← 이 아래로 가면 매도
```

### 하루 종일 (15분마다 체크)

**돌파 감시 → 필터 확인 → 진입**

```
15m 봉 종가 >= $82,000 ?  → Long 신호 발생!

체크 1: 1H EMA(50) 아래인데 롱? → 필터 불일치 → 스킵
체크 2: 어제 Range가 너무 작았나? → 노이즈 의심 → 스킵
체크 3: 펀딩 레이트가 +0.3% 초과? → 롱 비용 과다 → 스킵

모두 통과 → 시장가 매수!
```

### 진입 직후

**손절/익절 자동 설정**

```
예) $82,000에 Long 진입, ATR(14) = $500

손절 (SL) = $82,000 - 1.5 × $500 = $81,250  (지면 $750 손실)
익절 (TP) = $82,000 + 2.5 × $500 = $83,250  (오르면 $1,250 이익)

손실 : 이익 = 1 : 1.67  ← 이겨야 더 많이 먹는 구조
```

### 청산 (3가지 중 하나)

```
시나리오 A: 가격이 $81,250 이하로 하락 → 손절 (손실 확정)
시나리오 B: 가격이 $83,250 이상으로 상승 → 익절 (이익 확정)
시나리오 C: 24시간 지남, 아무 일도 안 일어남 → 시간 청산 (현재가로 나감)
```

---

## 4. 하루 흐름 예시 (타임라인)

```
09:00 (UTC 00:00)  돌파 레벨 계산: Long $82,000 / Short $78,000
09:15 ~ 14:00      가격 $79,500~$81,500 사이 등락, 돌파 없음
14:15              15m 봉 종가 $82,100 → Long 트리거! 필터 통과 → 매수
14:15              SL $81,250 / TP $83,250 자동 설정
17:30              15m 봉 High $83,300 → TP 도달! → 익절 청산

→ $82,000 매수 → $83,250 청산 = +$1,250 (포지션 대비 +1.52%)
→ 레버리지 3× 적용 시 마진 대비 +4.57%

18:00              이후 가격 급락하여 $78,200 → Short 트리거!
                   Long은 이미 오늘 1회 사용, Short은 미사용 → 진입 가능
                   필터 통과 → 숏 매도 진입

→ 하루에 Long 1회 + Short 1회 = 최대 2거래
```

---

## 5. 이 전략으로 수익이 나는 구조

### 핵심: 비대칭 수익 구조

```
승리 시 이익: 2.5 × ATR = $1,250
패배 시 손실: 1.5 × ATR = $750

이익 : 손실 = 1.67 : 1
```

이 말은 **10번 중 4번만 이겨도 수익**이라는 뜻입니다.

```
4승 6패일 때:
이익 = 4 × $1,250 = $5,000
손실 = 6 × $750  = $4,500
순이익 = +$500
```

### Profit Factor (수익 팩터)

```
Profit Factor = 총 이익 / 총 손실 = $5,000 / $4,500 = 1.11

PF > 1.0 이면 수익, PF > 1.3 이면 합격, PF > 1.6 이면 우수
```

### 왜 40% 승률로 충분한가?

대부분의 사람들은 "높은 승률 = 좋은 전략"이라고 생각하지만, 실제로 중요한 것은 **기대값**입니다.

```
기대값 = (승률 × 평균이익) - (패율 × 평균손실)
       = (0.45 × 2.5) - (0.55 × 1.5)
       = 1.125 - 0.825
       = +0.30 ATR (거래당)
```

기대값이 양수인 한, 거래를 반복하면 장기적으로 자산이 증가합니다.

---

## 6. 반드시 조심해야 할 것들

### 6.1 레버리지는 양날의 검

```
레버리지 없이 (1×):  +1% 수익 → +1%  /  -1% 손실 → -1%
레버리지 3×:         +1% 수익 → +3%  /  -1% 손실 → -3%
```

이 전략은 3× 레버리지를 사용합니다. 마진 캡(25%)이 있어 한 번에 큰 손실을 막지만, **연속 손실이 쌓이면 복리로 계좌가 줄어듭니다.**

```
5연속 손절 (각 0.56% NAV 손실):
$10,000 → $9,944 → $9,888 → $9,833 → $9,778 → $9,723
총 -2.77%  ← 감당 가능한 수준
```

### 6.2 횡보장(Choppy Market)이 가장 위험

이 전략의 **천적은 횡보장**입니다.

```
좋은 시장 (트렌드):    돌파 → 쭉 감 → 익절  ✓
나쁜 시장 (횡보/가짜돌파): 돌파 → 되돌림 → 손절  ✗  (반복)
```

- 가격이 위아래로 왔다갔다만 하면 돌파 신호가 뜨지만 바로 되돌아옵니다
- 이때 **연속 손절**이 발생합니다
- 방어 장치: EMA 방향 필터, 노이즈 필터, 쿨다운, 일간 손실 한도

### 6.3 펀딩 레이트 비용

무기한 선물은 8시간마다 펀딩 수수료가 발생합니다.

```
내가 Long 포지션 보유 중, 펀딩 레이트 +0.05%:
→ 내 포지션의 0.05%를 숏 보유자에게 지불
→ $7,500 포지션이면 $3.75 지출 (8시간마다)
→ 하루 3번 = $11.25
```

소액처럼 보이지만 장기 누적 시 무시 못 합니다. 극단적 펀딩(±0.3% 이상)에서는 진입 자체를 차단합니다.

### 6.4 강제 청산 (Liquidation)

3× 레버리지에서 가격이 진입가 대비 **~33% 역방향**으로 움직이면 강제 청산됩니다.

```
$82,000 Long 진입 시 → 약 $54,900까지 떨어져야 청산
손절($81,250)이 훨씬 먼저 작동하므로 사실상 발생 안 함
```

하지만 **거래소 장애나 극단적 급락**으로 손절이 작동하지 않을 이론적 가능성은 항상 존재합니다. 이것이 Isolated Margin을 쓰는 이유입니다 — 최악의 경우 그 포지션의 마진(계좌의 25%)만 잃습니다.

### 6.5 과최적화 (Overfitting) 주의

```
나쁜 예: "과거 데이터에서 k=0.47이 최고 수익이었으니까 0.47로 확정!"
좋은 예: "k=0.4~0.6 범위에서 모두 수익이 나고, 0.5 부근이 안정적이니 0.5로 설정"
```

과거에 완벽했던 값이 미래에도 완벽할 보장은 없습니다. **넓은 범위에서 안정적으로 수익이 나는 값**을 찾아야 합니다.

---

## 7. 최적화 가이드

### 7.1 조정 가능한 파라미터 (5개)

이 전략에서 **백테스트를 통해 최적값을 찾아야 하는 파라미터**는 5개입니다.

#### (1) k값 — 돌파 민감도 (가장 중요)

```
기본값: 0.5  |  탐색 범위: 0.3 ~ 0.7
```

| k값 | 의미 | 장점 | 단점 |
|---|---|---|---|
| 0.3 (낮음) | 작은 움직임에도 진입 | 거래 많음, 기회 놓치지 않음 | 가짜 돌파에 자주 걸림, 승률 낮음 |
| 0.5 (중간) | 중간 수준 돌파에 진입 | 균형잡힌 신호 | — |
| 0.7 (높음) | 큰 움직임에만 진입 | 가짜 돌파 필터링, 승률 높음 | 거래 적음, 기회 놓칠 수 있음 |

**조정 팁**: k를 0.3부터 0.7까지 0.05 단위로 백테스트하고, **Profit Factor가 안정적으로 1.3 이상인 구간**을 찾으세요. 특정 값 하나가 아니라 **구간**이 중요합니다.

#### (2) SL ATR 배수 — 손절 거리

```
기본값: 1.5  |  탐색 범위: 1.0 ~ 2.5
```

| 값 | 의미 |
|---|---|
| 1.0 (타이트) | 손절이 가까움 → 자주 손절됨 → 손실 작음 but 승률 낮음 |
| 1.5 (기본) | 적당한 여유 |
| 2.5 (넓음) | 손절이 멀음 → 잘 안 걸림 → 승률 높음 but 한 번 걸리면 손실 큼 |

**주의**: SL을 넓히면 포지션 사이즈가 줄어듭니다 (동일 리스크를 위해). 그리고 반드시 TP와의 비율(R:R)을 함께 고려하세요.

#### (3) TP ATR 배수 — 익절 거리

```
기본값: 2.5  |  탐색 범위: 2.0 ~ 4.0
```

| 값 | 의미 |
|---|---|
| 2.0 (가까움) | 자주 익절됨 → 승률 높음 but 이익 작음 |
| 2.5 (기본) | R:R 1.67:1 |
| 4.0 (멀리) | 큰 이익 → 승률 낮음 but 한 번에 크게 먹음 |

**핵심 관계**: SL과 TP는 항상 같이 봐야 합니다.

```
R:R = TP배수 / SL배수

SL 1.5, TP 2.5 → R:R = 1.67  (기본, 40% 승률부터 수익)
SL 1.0, TP 3.0 → R:R = 3.00  (공격적, 25% 승률부터 수익)
SL 2.0, TP 2.0 → R:R = 1.00  (비추, 50% 이상 승률 필요)
```

#### (4) Time Stop — 시간 제한

```
기본값: 24H  |  탐색 범위: 12H ~ 36H
```

| 값 | 의미 |
|---|---|
| 12H (짧음) | 빠르게 포기 → 다음 기회 노림, 시간청산 빈도 높음 |
| 24H (기본) | 하루 동안 기회 부여 |
| 36H (길게) | 더 기다림, 그만큼 마진이 묶여 있음 |

**조정 팁**: 시간 청산이 너무 많이 발생하면 (전체 청산의 30% 이상) Time Stop을 늘리거나, 모멘텀이 약하다는 신호이므로 전략 자체를 재점검하세요.

#### (5) EMA 기간 — 방향 필터 민감도

```
기본값: 50  |  탐색 범위: 20 ~ 100
```

| 값 | 의미 |
|---|---|
| 20 (짧음) | 최근 추세에 민감, 필터 자주 바뀜 |
| 50 (기본) | 중기 추세 |
| 100 (길게) | 장기 추세만 반영, 필터 변경 느림 |

### 7.2 절대 건드리지 말 것 (고정 파라미터)

아래 값들은 **리스크 관리의 뼈대**입니다. 최적화 대상이 아닙니다.

| 파라미터 | 값 | 이유 |
|---|---|---|
| 레버리지 | 3× | 높이면 강제 청산 위험 급증 |
| DD 1단계 | 8% | 조기 경보 |
| DD 2단계 | 13% | 방어 모드 진입점 |
| DD 3단계 | 18% | 최후 방어선 |
| 포지션 한도 | 1개 | 단일 자산 전략의 기본 |
| 마진 한도 | 25% | 한 번에 계좌의 1/4만 위험 노출 |

### 7.3 최적화 방법: Walk-Forward

"과거에 잘 된 값"이 "미래에도 잘 될 값"인지 검증하는 방법입니다.

```
[========= 1년 데이터 =========]

Fold 1: [---학습 180일---][--검증 60일--]
Fold 2: [------학습 240일------][--검증 60일--]
Fold 3: [---------학습 300일---------][검증~65일]
```

**순서**:
1. 학습 구간(IS)에서 k값 0.3~0.7을 0.05 단위로 전부 돌림
2. 가장 좋은 k값을 선택
3. 그 k값을 **검증 구간(OOS)**에 적용
4. OOS에서도 수익이 나는지 확인
5. 3개 Fold 모두에서 통과하면 해당 값은 **견고(robust)**

**합격 기준** (검증 구간 기준):

| 지표 | 최소 | 의미 |
|---|---|---|
| Profit Factor > 1.3 | 번 돈이 잃은 돈의 1.3배 이상 |
| Win Rate > 45% | 100번 중 45번 이상 이김 |
| Max DD < 20% | 최대 하락이 20% 미만 |
| 강제 청산 0회 | 단 한 번도 강제 청산 안 됨 |

---

## 8. 자주 하는 실수

### 실수 1: "승률이 낮아서 전략이 안 좋은 것 같아요"

이 전략은 승률 45%에서도 수익이 납니다. **승률이 아니라 기대값과 Profit Factor**를 보세요.

### 실수 2: "백테스트에서 k=0.47이 최고였으니 0.47로 고정!"

0.47에서만 좋고 0.45나 0.50에서 급격히 나빠진다면, 그건 과거 데이터의 우연입니다.
**k=0.4~0.55 전체 구간에서 안정적으로 수익이 나는지** 확인하세요.

### 실수 3: "손절이 아까워서 SL을 없애야겠다"

손절을 제거하면:
- 한 번의 큰 하락에 계좌 대부분을 잃을 수 있습니다
- 레버리지 3×에서 33% 하락 = 마진 전액 손실
- **손절은 보험료입니다. 아깝지만 반드시 내야 합니다.**

### 실수 4: "레버리지를 10배로 올리면 수익도 10배!"

레버리지를 올리면:
- 강제 청산 거리가 극적으로 가까워집니다 (10×면 ~10%에서 청산)
- 연속 손절 시 계좌 감소 속도가 급격히 빨라집니다
- **3×은 공격과 방어의 균형점**입니다

### 실수 5: "돌파 신호가 떴는데 필터 때문에 못 들어갔어요. 필터를 꺼야겠다"

필터는 **가짜 돌파를 걸러내는 안전장치**입니다.

```
필터 없이 100번 거래:  승률 35%, PF 1.1 (간신히 수익)
필터 적용 후 70번 거래: 승률 48%, PF 1.5 (안정적 수익)
```

거래 횟수가 줄더라도 **품질 좋은 신호만 취하는 것**이 장기적으로 유리합니다.

---

## 9. 비용 구조 이해하기

거래할 때마다 비용이 발생합니다. 수익에서 빠져나가는 돈을 정확히 알아야 합니다.

### 거래당 비용 (편도)

```
$7,500 포지션 기준:

수수료 (Taker 0.05%): $7,500 × 0.05% = $3.75
슬리피지 (0.03%):     $7,500 × 0.03% = $2.25
───────────────────────────────────────────
편도 합계:             $6.00

왕복 (진입 + 청산):    $12.00
```

### 하루 최대 비용

```
하루 최대 2거래 × 왕복 $12 = $24
한 달 (30일) 최대: $720
$10,000 계좌 기준: 월 -7.2%
```

비용만으로도 매달 계좌의 약 7%가 빠질 수 있습니다. 이것이 **승률과 R:R이 충분해야 하는 이유**입니다.

### 펀딩 비용 (포지션 보유 중)

```
8시간마다 정산 (하루 3번)
$7,500 포지션, 펀딩 0.01% (일반적 수준):
→ $7,500 × 0.01% = $0.75 / 8시간
→ 하루 $2.25 (무시할 수준)

펀딩 0.1% (높은 수준):
→ $7,500 × 0.1% = $7.50 / 8시간
→ 하루 $22.50 (무시 못 함!)
```

---

## 10. 체크리스트: 전략 시작 전 확인사항

시작 전에 아래 항목을 모두 확인하세요.

```
[ ] OKX 계좌 개설 및 KYC 완료
[ ] BTC/USDT-SWAP에서 Isolated Margin, 3× 레버리지 설정 확인
[ ] 초기 자본 $10,000 입금 (잃어도 생활에 지장 없는 금액인가?)
[ ] 백테스트 결과 OOS Profit Factor > 1.3 확인
[ ] 백테스트에서 강제 청산 0회 확인
[ ] k값이 ±0.1 변동해도 성과가 안정적인지 확인
[ ] 모든 리스크 한도(DD 3단계, 일간 가드레일) 코드에 구현 확인
[ ] 실전 투입 전 최소 1개월 Paper Trading(모의 거래) 수행
```

---

## 부록: 한눈에 보는 전략 흐름도

```
매일 09:00 (UTC 00:00)
    │
    ▼
┌──────────────────────┐
│  돌파 레벨 계산       │
│  Long = 시가 + k×Range│
│  Short = 시가 - k×Range│
└──────────┬───────────┘
           │
    매 15분마다 체크
           │
           ▼
┌──────────────────────┐     아니오
│  15m 종가 >= 트리거?  │────────────→ 대기 (다음 15m 봉)
└──────────┬───────────┘
           │ 예
           ▼
┌──────────────────────┐     불일치
│  방향 필터 (EMA 50)   │────────────→ 스킵
└──────────┬───────────┘
           │ 통과
           ▼
┌──────────────────────┐     범위 이하
│  노이즈 필터 (Range%) │────────────→ 스킵
└──────────┬───────────┘
           │ 통과
           ▼
┌──────────────────────┐     초과
│  펀딩 필터 (±0.3%)    │────────────→ 스킵
└──────────┬───────────┘
           │ 통과
           ▼
┌──────────────────────┐
│  쿨다운/가드레일 체크  │────────────→ 대기
└──────────┬───────────┘
           │ 통과
           ▼
┌──────────────────────┐
│  시장가 진입!         │
│  SL/TP 자동 설정      │
└──────────┬───────────┘
           │
    매 15분 모니터링
           │
     ┌─────┼─────┐
     ▼     ▼     ▼
   SL도달  TP도달  24H경과
     │     │     │
     ▼     ▼     ▼
   손절   익절   시간청산
  (시장가)(시장가)(시장가)
     │     │     │
     └─────┼─────┘
           ▼
     쿨다운 적용 후
     다음 신호 대기
```
